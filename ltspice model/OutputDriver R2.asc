Version 4
SHEET 1 1228 836
WIRE 384 -192 256 -192
WIRE 496 -192 384 -192
WIRE 624 -192 496 -192
WIRE 256 -176 256 -192
WIRE 624 -176 624 -192
WIRE 384 -112 384 -192
WIRE 624 -64 624 -96
WIRE 496 -48 496 -192
WIRE 0 -32 -208 -32
WIRE 384 -32 192 -32
WIRE 448 -32 384 -32
WIRE -208 -16 -208 -32
WIRE 0 64 -80 64
WIRE 256 64 256 -96
WIRE 256 64 192 64
WIRE -208 96 -208 64
WIRE -80 160 -80 144
WIRE -80 160 -496 160
WIRE 496 160 496 48
WIRE 544 160 496 160
WIRE 704 160 624 160
WIRE 832 160 704 160
WIRE 1088 160 912 160
WIRE 496 176 496 160
WIRE -496 192 -496 160
WIRE -80 192 -80 160
WIRE -80 224 -80 192
WIRE 0 304 -80 304
WIRE 272 304 192 304
WIRE 496 320 496 176
WIRE -496 336 -496 272
WIRE 0 400 -80 400
WIRE 384 400 192 400
WIRE 448 400 384 400
WIRE -80 448 -80 400
WIRE 272 448 272 304
WIRE 272 544 272 528
WIRE 384 544 384 480
WIRE 384 544 272 544
WIRE 496 544 496 416
WIRE 496 544 384 544
WIRE 1088 544 1088 160
WIRE 1088 544 496 544
WIRE 496 576 496 544
FLAG -80 448 0
FLAG -208 96 0
FLAG 496 576 0
FLAG -80 192 in
FLAG -496 336 0
FLAG 624 -64 0
FLAG 496 176 bridge_out
FLAG 704 160 out
SYMBOL Optos\\PC817A 96 16 R0
SYMATTR InstName U1
SYMBOL Optos\\PC817A 96 352 R0
SYMATTR InstName U2
SYMBOL res -96 48 R0
SYMATTR InstName R1
SYMATTR Value 470
SYMBOL res -96 208 R0
SYMATTR InstName R2
SYMATTR Value 470
SYMBOL voltage -208 -32 R0
WINDOW 123 0 0 Left 0
WINDOW 39 0 0 Left 0
SYMATTR InstName V1
SYMATTR Value 3.3V
SYMBOL voltage 256 -192 R0
WINDOW 123 0 0 Left 0
WINDOW 39 0 0 Left 0
SYMATTR InstName V2
SYMATTR Value 20v
SYMBOL voltage 272 432 R0
WINDOW 123 0 0 Left 0
WINDOW 39 0 0 Left 0
SYMATTR InstName V3
SYMATTR Value 20v
SYMBOL pmos 448 48 M180
SYMATTR InstName M1
SYMATTR Value TP5335
SYMBOL nmos 448 320 R0
SYMATTR InstName M2
SYMATTR Value TN2130
SYMBOL voltage 624 -192 R0
WINDOW 123 0 0 Left 0
WINDOW 39 0 0 Left 0
SYMATTR InstName V4
SYMATTR Value 170V
SYMBOL res 368 -128 R0
SYMATTR InstName R3
SYMATTR Value 1k
SYMBOL res 368 384 R0
SYMATTR InstName R4
SYMATTR Value 1k
SYMBOL voltage -496 176 R0
WINDOW 123 0 0 Left 0
WINDOW 39 0 0 Left 0
SYMATTR InstName V5
SYMATTR Value PULSE(0 3.3 0 0 0 10us 5us)
SYMBOL ind 528 176 R270
WINDOW 0 32 56 VTop 2
WINDOW 3 5 56 VBottom 2
SYMATTR InstName L1
SYMATTR Value 10mH
SYMBOL res 928 144 R90
WINDOW 0 0 56 VBottom 2
WINDOW 3 32 56 VTop 2
SYMATTR InstName R5
SYMATTR Value 1
TEXT -416 656 Left 2 !.model TN2130 VDMOS(Vto=2.4 Kp=0.01889 BV=300 Rd=2 Rs=23 Rg=1 Rds=3meg Cgs=10p Cgdmin=5p Cgdmax=40p Tnom=25 )\n.model TP5335 VDMOS(Vto=-2.4 Kp=0.01889 BV=-350 Rd=3 Rs=27 Rg=1 Rds=3meg Cgs=38p Cgdmin=22p Cgdmax=72p pchan Tnom=25 )
TEXT -416 728 Left 2 !.tran 0 5ms 0.1ms
